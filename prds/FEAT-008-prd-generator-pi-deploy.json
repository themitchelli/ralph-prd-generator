{
  "type": "feature",
  "project": "FADE PRD Generator",
  "id": "FEAT-008",
  "name": "Deploy PRD Generator to Raspberry Pi infrastructure",
  "description": "Move the PRD Generator from iMac hosting to the Raspberry Pi 5 where Assumptions Manager runs, with Caddy reverse proxy and auto-deploy via GitHub Actions.",
  "repository": "https://github.com/themitchelli/ralph-prd-generator",
  "dependsOn": ["FEAT-007"],
  "userStories": [
    {
      "id": "US-001",
      "title": "Create Dockerfile for PRD Generator",
      "description": "As a deployer, I want a Dockerfile so the app can run in a container on the Pi",
      "acceptanceCriteria": [
        "Dockerfile exists in repo root",
        "Multi-stage build if applicable (build + runtime)",
        "Exposes correct port",
        "Works on ARM64 architecture (Pi 5)",
        "Image builds successfully locally"
      ],
      "priority": 1,
      "passes": true
    },
    {
      "id": "US-002",
      "title": "Create docker-compose.yml for Pi deployment",
      "description": "As a deployer, I want docker-compose config for production deployment",
      "acceptanceCriteria": [
        "docker-compose.yml or docker-compose.prod.yml exists",
        "Service name is prd-generator or fade-prd-generator",
        "Container restarts automatically (restart: unless-stopped)",
        "Port mapping configured (internal port to host port)",
        "Volume mounts if needed for persistence"
      ],
      "priority": 2,
      "passes": true
    },
    {
      "id": "US-003",
      "title": "Configure Caddy reverse proxy",
      "description": "As a user, I want to access the PRD Generator via HTTPS at a clean URL",
      "acceptanceCriteria": [
        "Caddy config updated on Pi to include PRD Generator",
        "Domain: prd-generator.ddns.net or fade-prd.ddns.net",
        "HTTPS automatic via Caddy's Let's Encrypt",
        "Proxy passes to container port",
        "Existing Assumptions Manager config unchanged"
      ],
      "priority": 3,
      "passes": true
    },
    {
      "id": "US-004",
      "title": "Set up GitHub Actions for auto-deploy",
      "description": "As a developer, I want pushes to main to auto-deploy to the Pi",
      "acceptanceCriteria": [
        ".github/workflows/deploy.yml exists",
        "Triggers on push to main branch",
        "SSHs to Pi and pulls latest code",
        "Rebuilds and restarts container",
        "Follows same pattern as Assumptions Manager deploy",
        "Secrets configured in GitHub repo settings"
      ],
      "priority": 4,
      "passes": false
    },
    {
      "id": "US-005",
      "title": "Migrate from iMac to Pi",
      "description": "As the maintainer, I want to decommission the iMac hosting",
      "acceptanceCriteria": [
        "PRD Generator running successfully on Pi",
        "DNS updated if different subdomain",
        "iMac Docker container stopped",
        "Smoke test: can create and download a PRD from new URL",
        "README updated with new hosting location"
      ],
      "priority": 5,
      "passes": false
    }
  ]
}
